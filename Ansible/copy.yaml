- name: copy a file to remote server
  hosts: all
  become: true

  tasks:
    - name: install apache http server
      package:
        name: apache2
        state: present
      when: ansible_os_family == "Debian"

    - name: start apache2
      service:
        name: apache2
        state: started
        enabled: true

    - name: Copy file to remote server
      copy:
        src: index.html
        dest: /var/www/html/index.html
        owner: root
        group: root
        mode: '0644' #permissions
    - name: Add one line in index.html
      lineinfile:
        path: /var/www/html/index.html
        regexp: '^<h1>'
        insertafter: '</body>'
        line: "<h1> Deployed using Ansible </h1>"
    - name: add muti line in index.html
      blockinfile:
        path: /var/www/html/index.html
        marker: "<-- {mark} ANSIBLE MANAGED BLOCK -->"
        block: |
          <h1> Deployed using Ansible </h1>
          <p> This is a sample paragraph added by Ansible. </p>